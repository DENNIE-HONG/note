# http等
## 1. get/post
除了http层区别，在tcp/ip层面也有区别  
get请求：
```
headers + data  --->   服务器     
tcp数据包       <--- 200
```

post请求：  
```js
headers  ----->    服务器
tcp包   <------
        100 continue

data     ----->    服务器
tcp包    <----
          200
```

## 2. 双向通信
### 2.1 webSocket
允许服务器主动发送信息给客户端，双向数据流协议
与http是两码事。
* 传统TCP socket：标准化的API
* webSocket: 网络协议  

### 2.2 轮询
借助于setInterval等方式，客户端不断发送请求并得到相应。但轮询间隔过长，用户收到消息不及时，轮询间隔太短，增加服务器负担。

### 2.3 长轮询
客户端发出请求后，服务端用while(true)等方式阻塞住请求，直到有可用数据发送响应，又称为“comet”、“反向ajax”。但仍然是基于http的一种慢响应。
### 2.4 HTTP流（基于iframe）
```

           connect
          --------------> 
 _______           push      ________
|client | <--------------   | server |
|_______|           push    |________|
          <---------------
          close connection
          ---------------->
```
使用http1.1且响应头中包含Transfer-Encoding:chunked情况下，服务器发送给客户端数据可分成多个部分，保持打开，并周期性flush()分块传输。但数据响应可能会因代理服务器or防火墙等中间人造成延迟。
### 2.5 SSE(Server-Sent-Events)
服务端响应内容类型是text/event-stream,在浏览器端使用EventSource对象处理返回的数据。  
但不支持CORS，单向通信，浏览器兼容性差。

## 3.http1.1与http2
### http1.1
缺点：  
1. 客户端对同一域请求连接数有限制，不同浏览器有不同规定；
2. 线头阻塞问题：同一连接中的请求，需串行发送接收；
3. 请求和响应头大，无法压缩；
4. 只能单向请求；

### http2
升级：  
* 多路复用
* HPACK头压缩
* 流十二进制帧
* 流优先级等

特性：  
1. 传输内容使用二进制协议（更小的传输体积）
2. 使用帧作为最小传输单位（低延迟）
3. 多路复用（并发，同一流中帧交错传输，先到不一定先返回）
4. 头压缩
5. 服务器推送
6. 优先级与依赖性
7. 可重置
8. 流量控制
